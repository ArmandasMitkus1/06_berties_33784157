<!DOCTYPE html>
<html>
<head>
    <title>Your Cart â€“ <%= shopName %></title>
    <link rel="stylesheet" href="<%= basePath %>/main.css">
</head>
<body>
    <h1>ğŸ›’ Your Cart â€“ <%= shopName %></h1>

    <p>
        <a href="<%= basePath %>/">ğŸ  Home</a> |
        <a href="<%= basePath %>/books">ğŸ“š Books</a> |
        <a href="<%= basePath %>/users/list">ğŸ‘¤ Users</a> |
        <a href="<%= basePath %>/logout">ğŸšª Logout</a>
    </p>

    <hr>

    <% if (!cart || cart.length === 0) { %>
        <h2>Your cart is empty.</h2>
        <p><a href="<%= basePath %>/books">Browse books</a> to add some! ğŸ“˜</p>
    <% } else { %>
        <table border="1" cellpadding="6" cellspacing="0">
            <tr>
                <th>Book ID</th>
                <th>Title</th>
                <th>Price (Â£)</th>
                <th>Remove</th>
            </tr>

            <% let total = 0; %>
            <% cart.forEach(book => { %>
                <% total += Number(book.price); %>
                <tr>
                    <td><%= book.id %></td>
                    <td><%= book.name %></td>
                    <td>Â£<%= Number(book.price).toFixed(2) %></td>
                    <td>
                        <form action="<%= basePath %>/cart/remove" method="POST">
                            <input type="hidden" name="id" value="<%= book.id %>">
                            <button type="submit">âŒ Remove</button>
                        </form>
                    </td>
                </tr>
            <% }) %>
        </table>

        <h2 style="margin-top:20px;">
            ğŸ§¾ Cart Total: Â£<%= total.toFixed(2) %>
        </h2>

        <form action="<%= basePath %>/cart/checkout" method="POST">
            <button style="padding:10px 20px;">Proceed to Checkout ğŸ’³</button>
        </form>
    <% } %>
</body>
</html>
